{% extends "base.html" %}
{% block content %}
<h2>{{ store_name or "My Store" }} â€” Dashboard</h2>
<p><strong>Total inventory value:</strong> ${{ "%.2f"|format(total_value) }}</p>

<form method="GET" class="mb-3">
  <div class="input-group">
    <input class="form-control" name="search" placeholder="Search items..." value="{{ q }}">
    <button class="btn btn-add">Search</button>
  </div>
</form>

<a class="btn btn-add mb-3" href="{{ url_for('add_item') }}">Add Item</a>

<table class="table">
  <thead><tr><th>Name</th><th>Stock</th><th>Price</th><th>Days to sell out</th><th>Actions</th></tr></thead>
  <tbody>
    {% for item in items %}
      <tr {% if item.low_stock %}class="low-stock"{% endif %}>
        <td>{{ item.name }}</td>
        <td>{{ item.stock }}</td>
        <td>{{ "%.2f"|format(item.price) }}</td>
        <td>{{ item.days_to_sell_out }}</td>
        <td>
          <a class="btn btn-sm btn-primary" href="{{ url_for('edit_item', item_id=item.id) }}">Edit</a>
          <form method="POST" action="{{ url_for('delete_item', item_id=item.id) }}" style="display:inline">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
